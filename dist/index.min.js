"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){function a(t){return crypto.getRandomValues(new Uint8Array(t))}function f(t,n){return(n=void 0===n?document:n).querySelectorAll(t)}function l(t,n){return!h(t,n)}function s(t){return _typeof(t)}function d(t){var n=Boolean(~t.indexOf("["));return!n&&Boolean(~t.indexOf("'"))?t.replace(/'/g,""):JSON.parse(n?t.replace(/'/g,'"'):t)}function p(t,n){return t&&n}function g(t,n){var e=Object.keys(t),r=Object.keys(n);if(l(e.length,r.length))return!1;for(var o=!0,i=0,u=e;i<u.length;i++){var c=u[i],a=t[c],c=n[c],o=(o&&p(h(s(a),S),h(s(c),S))?g:h)(a,c);if(h(o,!1))return o}return o}function t(){var o,i=!1;return function(t,n,e){var r=e.value;return e.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return i||(o=r.apply(void 0,t),i=!0),o},e}}function o(t,e){return t?function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,t)}:function(){return null}}function y(t){return t.getAttribute("state")}function i(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||((r=r||Array.prototype.slice.call(n,0,o))[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))}function n(t){var r={},c=[];return t.forEach(function(t){var n=t,e=y(n),t=d(n.getAttribute("init"));O.setState(e,t),r[e]=t,f("[inject]",n).forEach(function(t){var r,o,i,u,n="state-"+(r="1234567890abcdefghijklmnopqrstuvwxyz",o=a,i=(2<<Math.log(r.length-1)/Math.LN2)-1,u=-~(1.6*i*18/r.length),function(){for(var t="";;)for(var n=o(u),e=u;e--;)if(18===(t+=r[n[e]&i]||"").length)return t}());t.removeAttribute("inject"),t.setAttribute(n,""),c=c.concat(n,t.innerHTML.split(/(\$[a-z-]+)/g))})}),[r,c]}function v(t,n){var e=O.getState()[n],r=O.shouldUpdate;o(r,function(){return f("["+n+"]",t).forEach(function(t){return t.innerText=JSON.stringify(e)})})(),o(r,function(){return f("[bind-"+n+"]",t).forEach(function(t){return t.value=e})})()}function b(t,n,e){return w.getListeners()[t].apply(void 0,i(i([],(o=n,[function(){return r(O.getState())},function(t){return O.setState(o,t)}]),!(r=function(t){return t[n]})),[e],!1));var r,o}var u,c,e,h=Object.is,S="object",r=function(n){return function(t){return console.log("%c"+t,"background-color: white; border: 1px solid "+n+"; color: "+n+"; border-radius: 2px; padding: 4px 8px;")}},m={log:r("#4895ef"),warn:r("#f48c06"),error:r("#e63946"),debug:r("#04e762"),info:r("#9b5de5")},w=(e={},{getListeners:function(){return e},setListeners:function(t,n){return e[t]=n}}),j=function(){return(j=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},O=(u={},c=!0,{getState:function(){return u},setState:function(t,n){var e=u[t],r=n;c=!(p(h(s(e),S),h(s(r),S))?g(e,r):!l(e,r))&&(u=j(j({},u),((r={})[t]=n,r)),!0)},get shouldUpdate(){return c}}),r=function(t,n,e,r){var o,i=arguments.length,u=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,e,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(u=(i<3?o(u):3<i?o(n,e,u):o(n,e))||u);return 3<i&&u&&Object.defineProperty(n,e,u),u},A=(E.renderInitialView=function(t){var o,t=n(t),i=t[0];t[1].forEach(function(t){var n,e,r;/^state-[a-z0-9-]{18}$/.test(t)?(o=f("["+t+"]")[0]).innerHTML="":/^\$[a-z-]+$/.test(t)?(n=t.slice(1),e=i[n],(r=document.createElement("span")).setAttribute(n,""),r.innerText=JSON.stringify(e),o.append(r)):o.append(document.createTextNode(t))}),m.debug("Initial view update is completed")},E.handleActions=function(t){t.forEach(function(t){var i=t,u=y(i),c="action-"+u;f("["+c+"]",i).forEach(function(t){var n=d(t.getAttribute(c)),e=n[0],r=n[1],o=n[2];t.addEventListener(r,function(){b(e,u,O.getState()[o]),v(i,u)})})}),m.debug("Actions are successfully bound")},E.applyInputBinds=function(t){t.forEach(function(n){var e=y(n);f("[bind-"+e+"]").forEach(function(r){var t=Symbol("@@bind-"+e);w.getListeners()[t]=function(t,n,e){n(e),r.value=String(e)},r.addEventListener("input",function(){b(t,e,r.value),v(n,e)})})}),m.debug("Two way data binding is enabled")},E.executeRenderProcess=function(){return function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];t.forEach(function(t){return t(n())})}(function(){return f("[bean]")},E.renderInitialView,E.handleActions,E.applyInputBinds)},r([t()],E,"renderInitialView",null),r([t()],E,"handleActions",null),r([t()],E,"applyInputBinds",null),E);function E(){}window.bootstrap=function(){A.executeRenderProcess(),window.setBeanListeners=function(n){return Object.keys(n).forEach(function(t){return w.getListeners()[t]=n[t]})},m.log("Globals are injected"),m.warn("Inject listeners using setBeanListeners method")},m.info("Bean is ready!")}();