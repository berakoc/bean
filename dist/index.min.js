"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){function a(t){return crypto.getRandomValues(new Uint8Array(t))}function p(t,n){return(n=void 0===n?document:n).querySelectorAll(t)}function d(t,n){return!g(t,n)}function y(t){return _typeof(t)}function f(t){var n=Boolean(~t.indexOf("["));return!n&&Boolean(~t.indexOf("'"))?t.replace(/'/g,""):JSON.parse(n?t.replace(/'/g,'"'):t)}function l(t,n){return t&&n}function s(t,n){var e=Object.keys(t),r=Object.keys(n);if(d(e.length,r.length))return!1;for(var o=!0,i=0,u=e;i<u.length;i++){var c=u[i],a=t[c],c=n[c],o=(o&&l(g(y(a),b),g(y(c),b))?s:g)(a,c);if(g(o,!1))return o}return o}function t(){var o,i=!1;return function(t,n,e){var r=e.value;return e.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return i||(o=r.apply(void 0,t),i=!0),o},e}}function r(t,e){return t?function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,t)}:function(){return null}}var o,v,g=Object.is,b="object",n=function(n){return function(t){return console.log("%c"+t,"background-color: white; border: 1px solid "+n+"; color: "+n+"; border-radius: 2px; padding: 4px 8px;")}},e={log:n("#4895ef"),warn:n("#f48c06"),error:n("#e63946"),debug:n("#04e762"),info:n("#9b5de5")},n=(o=function(t,n){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)});v=v||{},v[v.TYPE_IS_NOT_ITERABLE=601]="TYPE_IS_NOT_ITERABLE";function h(t){return t.getAttribute("state")}function i(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||((r=r||Array.prototype.slice.call(n,0,o))[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))}function u(t){var r={},c=[];return t.forEach(function(t){var n=t,e=h(n),t=f(n.getAttribute("init"));j.setState(e,t),r[e]=t,p("[inject]",n).forEach(function(t){var r,o,i,u,n=e+"-"+(r="1234567890abcdefghijklmnopqrstuvwxyz",o=a,i=(2<<Math.log(r.length-1)/Math.LN2)-1,u=-~(1.6*i*18/r.length),function(){for(var t="";;)for(var n=o(u),e=u;e--;)if(18===(t+=r[n[e]&i]||"").length)return t}());t.removeAttribute("inject"),t.setAttribute(n,""),c=c.concat(n,t.innerHTML.split(/(\$[a-z-]+)/g))})}),[r,c]}function m(t,n){var o=j.getState()[n],e=j.shouldUpdate;r(e,function(){return p("["+n+"]",t).forEach(function(t){return t.innerText=o})})(),r(e,function(){return p("[bind-"+n+"]",t).forEach(function(t){return t.value=o})})(),r(e,function(){return p("."+n+"-template").forEach(function(e){var r=e.getAttribute("child-class");e.innerHTML="",o.forEach(function(t){var n=document.createElement("div");n.innerText=t,n.className=r,e.append(n)})})})()}function E(t,n,e){return _.getListeners()[t].apply(void 0,i(i([],(o=n,[function(){return r(j.getState())},function(t){return j.setState(o,t)}]),!(r=function(t){return t[n]})),[e],!1));var r,o}var c,w,A,O,S=(O=Error,n(I,O),I),_=(A={},{getListeners:function(){return A},setListeners:function(t,n){return A[t]=n}}),T=function(){return(T=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},j=(c={},w=!0,{getState:function(){return c},setState:function(t,n){var e=c[t],r=n;w=!(l(g(y(e),b),g(y(r),b))?s(e,r):!d(e,r))&&(c=T(T({},c),((r={})[t]=n,r)),!0)},get shouldUpdate(){return w}}),n=function(t,n,e,r){var o,i=arguments.length,u=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,e,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(u=(i<3?o(u):3<i?o(n,e,u):o(n,e))||u);return 3<i&&u&&Object.defineProperty(n,e,u),u},x=(L.renderInitialView=function(t){var l,t=u(t),s=t[0];t[1].forEach(function(t){if(/^\w+-[a-z0-9-]{18}$/.test(t))(l=p("["+t+"]")[0]).innerHTML="";else if(/^\$map-[a-zA-Z]+-?[a-zA-Z-]*$/.test(t)){var n=t.substring(5),e=n.indexOf("-"),r=n.substring(0,e),o=n.substring(e+1),e=j.getState()[r];if(d(y(e[Symbol.iterator]),"function"))throw new S("Value is not iterable",v.TYPE_IS_NOT_ITERABLE);var i=document.createElement("div");i.className=r+"-template",i.setAttribute("child-class",o);for(var u=0,c=e;u<c.length;u++){var a=c[u],f=document.createElement("div");f.innerText=a,f.className=o,i.append(f)}l.append(i)}else/^\$[a-z-]+$/.test(t)?(r=t.slice(1),a=s[r],(e=document.createElement("span")).setAttribute(r,""),e.innerText=a,l.append(e)):l.append(document.createTextNode(t))}),e.debug("Initial view update is completed")},L.handleActions=function(t){t.forEach(function(t){var i=t,u=h(i),c="action-"+u;p("["+c+"]",i).forEach(function(t){var n=f(t.getAttribute(c)),e=n[0],r=n[1],o=n[2];t.addEventListener(r,function(){E(e,u,j.getState()[o]),m(i,u)})})}),e.debug("Actions are successfully bound")},L.applyInputBinds=function(t){t.forEach(function(n){var e=h(n);p("[bind-"+e+"]").forEach(function(r){var t=Symbol("@@bind-"+e);_.getListeners()[t]=function(t,n,e){n(e),r.value=String(e)},r.addEventListener("input",function(){E(t,e,r.value),m(n,e)})})}),e.debug("Two way data binding is enabled")},L.executeRenderProcess=function(){return function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];t.forEach(function(t){return t(n())})}(function(){return p("[bean]")},L.renderInitialView,L.handleActions,L.applyInputBinds)},n([t()],L,"renderInitialView",null),n([t()],L,"handleActions",null),n([t()],L,"applyInputBinds",null),L);function L(){}function I(t,n){t=O.call(this,t)||this;return t.errorCode=n,t}window.bootstrap=function(){x.executeRenderProcess(),window.setBeanListeners=function(n){return Object.keys(n).forEach(function(t){return _.getListeners()[t]=n[t]})},e.log("Globals are injected"),e.warn("Inject listeners using setBeanListeners method")},e.info("Bean is ready!")}();